[Unit]
Description=Switch Monitor Script
After=network.target dev-ttyUSB2.device
Requires=dev-ttyUSB2.device

[Service]
Type=simple
WorkingDirectory=/mnt/data
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
Environment=XDG_RUNTIME_DIR=/run/user/1000
Environment=PULSE_RUNTIME_PATH=/run/user/1000/pulse
Environment=PULSE_SERVER=unix:/run/user/1000/pulse/native
ExecStartPre=/bin/sleep 3
ExecStart=/mnt/data/switch_mon.sh
# The SIGTERM will give a 0 return code which indicates all is good.
# This would cause a call to be placed. Using SIGKILL causes a nonzero
# return code.
KillSignal=SIGKILL
User=kuser
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

# Resource limits and security
LimitNOFILE=1024
PrivateTmp=false
PrivateDevices=false

[Install]
WantedBy=multi-user.target

# /etc/systemd/system/switch_mon.service this will be the location of this file.
